# 9 排序和顺序统计

中位数，对于元素个数为 n 的集合：

* n 为奇数，中位数下标为 `(n+1)/2`
* n 为偶数，中位数有两个，下标分别为 `n/2` 和 `(n/2)+1`

本章讨论的主题是：在元素个数为 n 的集合中，以 O(n) 的期望运行时间，找第 i 小的元素。

* 当 i = 1 就是找最小值
* 若 i = n 就是找最大值
* 其它情况，就是找中间某个值，如中位数

## 9.1 最小值和最大值

找最小值，两种方法：

1. 拿第一个数，跟后边 n-1 个数比较。总共的比较次数是 n-1 次
2. 两两比较，然后较小的再两两比较。总共的比较次数还是 n-1 次

假设 n 是 2 的幂，第二个是这么算的：

```
  n/2 + n/4 + ... + 1 
= n/2 + n/4 + ... + n/n 
= n * (1/2 + 1/4 + ... + 1/n) 
= n * (1/2 + 1/4 + ... + 1/n + 1/n - 1/n)
= n * (1 - 1/n)
= n * (n-1)/n
= n-1
```

同时找最大和最小值：先两两比较，然后大的跟最大比，小的跟最小比。

### 9.1-1

找 n 个元素中第二小的元素，解题步骤：

1. n 个元素，两两比较，取出最小值，共有 n-1 次比较
2. 共有 lgn 个元素与最小值做过比较，第二小的元素就在其中。所以还要经过 lgn-1 次比较选出第二小。

总共的比较次数就是 `n-1 + lgn-1 = n+lgn-2` 。

### 9.1-2

## 9.2 期望为线性时间的选择算法

这里解决的是 top-k 问题。就是找第 k 大或第 k 小元素。

这个问题在 leetcode 上有这么些题：

* [215. 数组中的第K个最大元素](https://leetcode-cn.com/problems/kth-largest-element-in-an-array/)
* [面试题40. 最小的k个数](https://leetcode-cn.com/problems/zui-xiao-de-kge-shu-lcof/)
* [面试题 17.14. 最小K个数](https://leetcode-cn.com/problems/smallest-k-lcci/)

